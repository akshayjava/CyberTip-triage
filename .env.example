# â”€â”€ Server â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
PORT=3000
NODE_ENV=development
CORS_ORIGIN=http://localhost:5173

# â”€â”€ Database â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DB_MODE=memory          # memory | postgres
DATABASE_URL=postgresql://user:pass@localhost:5432/cybertip

# â”€â”€ Queue â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
QUEUE_MODE=memory       # memory | bullmq
REDIS_HOST=localhost
REDIS_PORT=6379
QUEUE_CONCURRENCY=5

# â”€â”€ LLM Provider â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Select which AI provider powers the triage pipeline.
# Agents automatically use the appropriate model tier per provider.
#
# Options:
#   anthropic  (default) â€” Claude Opus / Sonnet / Haiku
#   openai               â€” GPT-4o / GPT-4o-mini
#   gemini               â€” Gemini 1.5 Pro / Flash
#   local                â€” Any Ollama / LM Studio / vLLM / Jan server
#
LLM_PROVIDER=anthropic

# API keys â€” only the key for your chosen provider is required
ANTHROPIC_API_KEY=sk-ant-...
# OPENAI_API_KEY=sk-...
# GEMINI_API_KEY=AIza...

# Local LLM settings (only needed when LLM_PROVIDER=local)
# LOCAL_LLM_BASE_URL=http://localhost:11434/v1   # Ollama (default)
# LOCAL_LLM_BASE_URL=http://localhost:1234/v1    # LM Studio
# LOCAL_LLM_BASE_URL=http://localhost:8000/v1    # vLLM
# LOCAL_LLM_API_KEY=ollama                       # Ollama doesn't need a real key
# LOCAL_MODEL_HIGH=llama3.1:70b                  # Used by Legal Gate, Classifier, Priority
# LOCAL_MODEL_MEDIUM=llama3.1:8b                 # Used by Linker
# LOCAL_MODEL_FAST=llama3.1:8b                   # Used by Intake, Extraction, Hash OSINT
#
# âš  Local models must support function/tool calling for full pipeline operation.
# Tested models: llama3.1, mistral-nemo, qwen2.5, command-r (via Ollama)
# Models without tool calling will fail on Legal Gate, Linker, Priority, Hash OSINT.

# Optional: override individual model tiers regardless of provider
# LLM_MODEL_HIGH=claude-opus-4-6
# LLM_MODEL_MEDIUM=claude-sonnet-4-6
# LLM_MODEL_FAST=claude-haiku-4-5-20251001

# â”€â”€ IDS Portal (ICAC Data System) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
IDS_ENABLED=false
IDS_BASE_URL=https://www.icacdatasystem.com
IDS_POLL_INTERVAL_MS=60000
IDS_DOWNLOAD_DIR=/tmp/cybertip-ids
# For local dev, point to a directory of .txt files with PDF text content:
IDS_STUB_DIR=./test-data/ids-stubs
# Real credentials (law enforcement registration required):
# IDS_EMAIL=investigator@agency.gov
# IDS_PASSWORD=
# IDS_MFA_SECRET=

# â”€â”€ NCMEC API â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
NCMEC_API_ENABLED=false
NCMEC_API_BASE_URL=https://api.ncmec.org
NCMEC_POLL_INTERVAL_MS=30000
# NCMEC_API_KEY=                    # Law enforcement credentials required

# â”€â”€ Email Ingestion â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
EMAIL_ENABLED=false
EMAIL_IMAP_HOST=imap.agency.gov
EMAIL_IMAP_PORT=993
EMAIL_TLS=true
# EMAIL_USER=tips@icac.agency.gov
# EMAIL_PASSWORD=

# â”€â”€ VPN Portal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
VPN_PORTAL_ENABLED=true
VPN_PORTAL_PORT=3001
VPN_PORTAL_SECRET=change-this-secret-in-production

# â”€â”€ Inter-Agency â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
INTER_AGENCY_ENABLED=false
# INTER_AGENCY_API_KEYS=key1,key2,key3

# â”€â”€ External APIs (real implementations) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# PROJECT_VIC_API_KEY=               # Project VIC law enforcement vetting required
# IWF_API_KEY=                       # IWF Contraband Filter
# INTERPOL_ICSE_KEY=                 # Via NCB liaison
# RISSAFE_API_KEY=                   # De-confliction system
# HIBP_API_KEY=                      # HaveIBeenPwned (breach check)

# â”€â”€ Alert delivery â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# Email alerts (supervisor + crisis notifications)
# Works with any SMTP provider: SendGrid, AWS SES, Postfix, Office365
ALERT_EMAIL_HOST=smtp.sendgrid.net
ALERT_EMAIL_PORT=587
ALERT_EMAIL_USER=apikey
ALERT_EMAIL_PASS=your-sendgrid-api-key
ALERT_FROM_EMAIL=icac-triage@agency.gov
# Comma-separated â€” receive all supervisor alerts + crisis alerts
ALERT_SUPERVISOR_EMAILS=supervisor@agency.gov,duty.supervisor@agency.gov
# Comma-separated â€” receive victim crisis alerts (include victim services unit)
ALERT_CRISIS_EMAILS=supervisor@agency.gov,victim.services@agency.gov,crisis.unit@agency.gov

# SMS crisis alerts via Twilio (victim crisis only â€” highest urgency)
# Leave blank to disable SMS â€” email-only fallback will be used
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_FROM_NUMBER=+12025550100
# Comma-separated mobile numbers â€” receive ðŸš¨ VICTIM CRISIS SMS immediately
ALERT_CRISIS_PHONES=+12025550101,+12025550102
